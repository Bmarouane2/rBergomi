using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

using ZedGraph.Web;
using ZedGraph;

namespace rBergomi
{
    public partial class Graph : Form
    {

        public Graph()
        {
            InitializeComponent();
            GraphPane myPane = zedGraphControl1.GraphPane;
            myPane.Title.Text = " ";
            myPane.XAxis.Title.Text = "T";
            myPane.YAxis.Title.Text = "MC standard deviations ";

            PointPairList VIX_fut_Prices_LogN = new PointPairList();
            PointPairList VIX_fut_Prices_Hybrid = new PointPairList();

            double[] x_i = buildx_i();


            rBergomiVIXfuture model = new rBergomiVIXfuture();
            Func<double, double> epsilon_0 = t => Math.Pow(0.235, 2);// *Math.Pow(1 + t, 2);


            double B = 0.0;
            for (int i = 0; i < x_i.Count(); i++)
            {
                double stdev;
                double vix = model.VIXfuture_TruncatedChlsky(x_i[i], epsilon_0, out stdev);
                //VIX_fut_Prices_LogN.Add(x_i[i], model.LogNormalBergomi(x_i[i], epsilon_0));
                VIX_fut_Prices_Hybrid.Add(x_i[i], stdev);
                //VIX_fut_Prices_Hybrid.Add(x_i[i], 0.2);
            }

            //LineItem teamACurve = myPane.AddCurve("Log Normal Approximation",
            //     VIX_fut_Prices_LogN, Color.Red, SymbolType.None);

            LineItem teamBCurve = myPane.AddCurve("Monte-Carlo standard deviations (Trancated Cholesky) ",
                VIX_fut_Prices_Hybrid, Color.Red, SymbolType.None);

            zedGraphControl1.AxisChange();

        }


        private double[] buildx_i()
        {

            double[] test = { 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2 };

                return test;
        }

        private double[] builB_i()
        {

            double[] test = { 0,0.00438487,-0.000693827,0.000771317,-0.000217432,0.0169702,-0.00794044,-0.0237134,-0.0218628,-0.0322594,-0.0468857,-0.0465604,-0.0431402,-0.0560094,-0.0475208,-0.0487401,-0.0238872,-0.00760819,-0.0186118,-0.0219338,-0.0383884,-0.0265032,-0.0225075,-0.0180287,-0.0122282,-0.00216149,-0.00208125,0.00802981,0.027372,0.0214945,0.0197386,0.0281678,0.0212127,0.0291135,0.0324151,0.0608415,0.0447367,0.0596995,0.07367,0.102818,0.099792,0.067485,0.0441292,0.0526263,0.0348026,0.0195479,0.0103579,0.0215865,0.037787,0.0310965,0.0422663,0.0496882,0.0570745,0.0636345,0.0510142,0.0378712,0.0568239,0.0680277,0.0677935,0.0640447,0.0653621,0.0624169,0.0444296,0.0354618,0.0135203,-0.00821745,-0.0145534,-0.027383,-0.0800406,-0.130046,-0.14147,-0.131462,-0.111352,-0.107519,-0.0998142,-0.089336,-0.0766837,-0.0946689,-0.0781452,-0.0616187,-0.0391671,-0.0568996,-0.0493333,-0.0670546,-0.0690996,-0.0692601,-0.0423883,-0.0332595,-0.031795,-0.0378453,-0.023564,-0.0173875,0.00493551,0.0145686,0.0268845,0.0171587,0.0299001,0.0300675,0.0424393,0.0713907,0.0586899,0.0748915,0.071707,0.0807088,0.0822955,0.0851797,0.0642917,0.0548258,0.0616816,0.052086,0.0447028,0.0342442,0.0476029,0.0269742,0.0129078,0.028752,0.0186608,0.0141607,0.0263805,0.019989,0.0273298,0.0367766,0.0594806,0.0591876,0.0645351,0.0611701,0.0513612,0.0604322,0.0684824,0.0956257,0.12571,0.131944,0.161127,0.170115,0.17432,0.154097,0.171077,0.195496,0.185273,0.212409,0.218992,0.210083,0.188327,0.232866,0.25084,0.238213,0.235361,0.227139,0.224425,0.23836,0.280358,0.30137,0.290558,0.312863,0.278803,0.267854,0.22754,0.199974,0.181115,0.20522,0.199987,0.192813,0.206596,0.21604,0.255876,0.297506,0.286058,0.26458,0.250101,0.28671,0.2938,0.31079,0.330195,0.323438,0.353561,0.326462,0.327012,0.341585,0.34364,0.322757,0.322948,0.345295,0.342722,0.374731,0.413627,0.415247,0.415076,0.395073,0.431445,0.414478,0.414415,0.433751,0.425414,0.439282,0.446035,0.434742,0.430564,0.425405,0.443725,0.462696,0.472819,0.465389,0.492468,0.488016,0.480389,0.467705,0.459929,0.453647,0.458862,0.479009,0.511207,0.511577,0.507928,0.493191,0.500674,0.520882,0.522825,0.558083,0.540366,0.530638,0.511028,0.511747,0.492094,0.467959,0.439037,0.437515,0.438457,0.4291,0.422964,0.399512,0.399866,0.390443,0.402132,0.401249,0.406393,0.416605,0.41158,0.410543,0.381914,0.369194,0.421334,0.415761,0.429075,0.44166,0.436748,0.4351,0.42922,0.434353,0.441266,0.432745,0.410359,0.394456,0.380466,0.336156,0.332671,0.328454,0.325564,0.306405,0.3059,0.312406,0.314574,0.322237,0.348476,0.336771,0.33505,0.308418,0.313728,0.311054,0.302918,0.319781,0.310463,0.306673,0.30593,0.297968,0.305404,0.319083,0.29691,0.303673,0.29287,0.331064,0.329338,0.314325,0.277156,0.283695,0.314086,0.296613,0.278409,0.302391,0.314489,0.305779,0.314512,0.334012,0.314437,0.293933,0.286529,0.265399,0.240324,0.248281,0.268282,0.287577,0.299233,0.286901,0.283351,0.296598,0.295317,0.31294,0.300388,0.299894,0.315244,0.266551,0.257911,0.252226,0.279549,0.273926,0.262545,0.265976,0.223067,0.223619,0.242591,0.261786,0.253377,0.289666,0.300681,0.294874,0.277661,0.287153,0.27801,0.278829,0.290028,0.306913,0.269416,0.279175,0.30146,0.345254,0.3335,0.308571,0.311995,0.310817,0.327025,0.316653,0.304896,0.281444,0.276929,0.269754,0.260535,0.249181,0.240199,0.229499,0.241272,0.19644,0.177626,0.173001,0.16296,0.173892,0.177625,0.159982,0.193619,0.171757,0.17761,0.185872,0.190497,0.179576,0.211807,0.200945,0.206735,0.198049,0.185925,0.181483,0.163661,0.201588,0.181427,0.189133,0.211413,0.220487,0.206205,0.197725,0.207819,0.194731,0.188743,0.166253,0.183484,0.152973,0.139535,0.132934,0.157473,0.157829,0.14029,0.130356,0.117038,0.129385,0.140169,0.141216,0.140591,0.145529,0.13697,0.134243,0.0969656,0.107235,0.0786758,0.0750278,0.0496545,0.0572948,0.0590424,0.063528,0.0373222,0.0389464,0.0151166,-0.00920015,-0.0181175,-0.0239274,-0.069303,-0.0620902,-0.0812673,-0.0631293,-0.0834759,-0.105237,-0.0768146,-0.083489,-0.101032,-0.0777761,-0.0712711,-0.0768075,-0.0731258,-0.0935898,-0.108388,-0.114808,-0.129271,-0.111757,-0.13203,-0.118816,-0.134898,-0.151875,-0.151789,-0.151855,-0.157368,-0.14102,-0.153523,-0.148515,-0.15786,-0.143937,-0.147912,-0.134054,-0.139182,-0.155282,-0.133926,-0.130859,-0.137565,-0.162095,-0.16097,-0.168623,-0.169862,-0.150904,-0.136161,-0.136158,-0.165327,-0.174093,-0.217086,-0.209419,-0.213881,-0.211063,-0.199927,-0.159726,-0.169113,-0.151455,-0.146006,-0.121726,-0.122648,-0.0762671,-0.0674895,-0.0797444,-0.0895993,-0.109816,-0.122798,-0.105223,-0.105115,-0.111794,-0.110432,-0.112242,-0.146258,-0.131466,-0.114294,-0.114201,-0.149457,-0.154896,-0.189097,-0.155191,-0.148722,-0.14408,-0.108253,-0.117706,-0.122636,-0.111254,-0.120864,-0.102784,-0.0861435,-0.0932562,-0.0994498,-0.0677641,-0.0832057,-0.0826616,-0.0699014,-0.0464224,-0.0238591,0.000672172,-0.00155509,-0.029442,-0.0675082,-0.0745754,-0.101302,-0.0785995,-0.0781864,-0.0925998,-0.0831602,-0.108343,-0.08128,-0.073468,-0.0807976,-0.0589138,-0.0663452,-0.0701291,-0.0720432,-0.0771447,-0.059011,-0.0579978,-0.0425821,-0.0649577,-0.0334171,-0.0244992,-0.0426455,-0.00258297,0.00212027,-0.00740788,0.00746184,-0.00885819,-0.0424481,-0.0488753,-0.055207,-0.0721265,-0.0724363,-0.0810519,-0.101625,-0.10682,-0.100551,-0.101425,-0.126493,-0.153479,-0.13393,-0.121289,-0.124523,-0.11553,-0.128132,-0.161942,-0.133915,-0.115229,-0.0768318,-0.110333,-0.0831358,-0.0773566,-0.076706,-0.0961123,-0.114636,-0.108303,-0.120248,-0.105602,-0.0846653,-0.0804565,-0.108132,-0.0985859,-0.0830289,-0.0735775,-0.0914285,-0.107679,-0.117137,-0.129865,-0.120604,-0.117538,-0.135995,-0.159505,-0.162807,-0.186759,-0.162219,-0.204245,-0.172397,-0.165697,-0.165727,-0.182036,-0.18983,-0.179043,-0.186543,-0.174839,-0.19637,-0.20371,-0.2231,-0.244919,-0.238143,-0.247143,-0.218682,-0.219554,-0.201254,-0.212854,-0.20652,-0.198084,-0.223082,-0.249805,-0.251953,-0.252727,-0.255962,-0.247074,-0.220585,-0.242112,-0.228692,-0.232452,-0.240021,-0.199739,-0.209107,-0.186559,-0.184328,-0.171365,-0.156002,-0.166228,-0.185632,-0.182621,-0.168043,-0.182588,-0.18723,-0.173834,-0.179949,-0.16266,-0.172087,-0.193548,-0.179268,-0.149518,-0.122163,-0.129198,-0.103786,-0.138064,-0.139573,-0.161178,-0.161932,-0.18382,-0.188649,-0.212374,-0.244763,-0.248622,-0.245993,-0.244759,-0.238814,-0.242163,-0.213535,-0.188904,-0.171998,-0.168492,-0.175996,-0.151601,-0.128115,-0.137108,-0.136551,-0.143355,-0.146572,-0.167225,-0.187223,-0.178133,-0.139517,-0.183673,-0.176003,-0.161929,-0.152057,-0.137795,-0.154413,-0.152216,-0.153002,-0.149401,-0.120835,-0.140584,-0.119918,-0.131757,-0.126316,-0.123037,-0.135483,-0.109532,-0.113354,-0.124904,-0.0950065,-0.0973435,-0.101655,-0.122496,-0.120868,-0.136354,-0.15318,-0.201374,-0.214747,-0.213354,-0.232295,-0.233928,-0.249484,-0.249154,-0.240571,-0.226668,-0.250072,-0.275729,-0.284065,-0.24921,-0.254213,-0.256092,-0.260051,-0.232855,-0.21485,-0.181307,-0.18292,-0.183436,-0.18252,-0.164211,-0.185612,-0.177039,-0.169817,-0.181454,-0.201936,-0.176394,-0.181042,-0.145667,-0.143628,-0.130562,-0.103467,-0.104024,-0.10164,-0.0904548,-0.0862813,-0.12706,-0.160708,-0.189726,-0.229502,-0.248124,-0.268614,-0.257227,-0.26862,-0.271834,-0.300158,-0.322922,-0.323879,-0.29651,-0.307926,-0.310332,-0.336143,-0.356727,-0.354341,-0.369937,-0.348044,-0.334903,-0.361372,-0.384997,-0.381712,-0.367597,-0.352446,-0.372687,-0.385913,-0.393484,-0.381778,-0.383943,-0.381266,-0.409071,-0.396891,-0.394547,-0.381475,-0.377042,-0.367039,-0.366418,-0.360007,-0.362878,-0.347414,-0.344887,-0.33702,-0.333757,-0.324152,-0.313606,-0.29203,-0.31542,-0.308358,-0.285401,-0.268971,-0.288719,-0.301578,-0.296855,-0.313394,-0.314189,-0.306635,-0.34706,-0.314514,-0.292909,-0.271257,-0.254295,-0.241225,-0.244653,-0.254521,-0.243971,-0.26312,-0.2968,-0.323542,-0.345052,-0.358911,-0.342651,-0.369561,-0.369391,-0.368377,-0.363141,-0.392825,-0.415582,-0.429552,-0.443928,-0.424428,-0.422761,-0.417438,-0.420519,-0.388684,-0.383986,-0.356681,-0.347377,-0.366749,-0.356017,-0.392066,-0.381164,-0.396142,-0.394649,-0.3726,-0.385238,-0.373227,-0.390134,-0.392054,-0.400455,-0.403676,-0.40926,-0.389465,-0.422347,-0.387757,-0.39315,-0.408387,-0.39674,-0.409462,-0.369143,-0.371904,-0.347379,-0.355526,-0.351845,-0.352958,-0.364475,-0.354311,-0.346147,-0.331748,-0.324305,-0.363214,-0.362459,-0.373631,-0.37457,-0.353319,-0.358238,-0.34118,-0.337329,-0.346866,-0.339601,-0.298325,-0.312614,-0.2905,-0.308666,-0.30267,-0.286466,-0.255856,-0.253403,-0.249366,-0.254943,-0.263216,-0.273098,-0.305169,-0.298512,-0.28532,-0.296841,-0.31864,-0.308036,-0.294214,-0.330727,-0.311123,-0.30845,-0.301985,-0.269198,-0.268603,-0.280193,-0.246761,-0.26529,-0.232545,-0.242325,-0.256005,-0.233009,-0.233368,-0.239368,-0.214884,-0.197633,-0.199204,-0.203721,-0.187821,-0.166589,-0.154962,-0.15864,-0.14427,-0.125848,-0.111869,-0.143162,-0.121444,-0.12483,-0.129535,-0.150841,-0.171487,-0.152439,-0.131377,-0.132598,-0.123414,-0.11311,-0.121557,-0.10274,-0.106288,-0.10156,-0.101841,-0.0905938,-0.0421689,-0.0374,-0.0564532,-0.0739004,-0.066862,-0.0869688,-0.056846,-0.0293022,-0.0360005,-0.0701609,-0.0644447,-0.0613209,-0.03546,-0.0424702,-0.0384245,-0.040607,-0.0423485,-0.0531854,-0.0602819,-0.0269054,-0.0358272,-0.0424133,-0.0969993,-0.114649,-0.104772,-0.105126,-0.128015,-0.134379,-0.140016,-0.124781,-0.132432,-0.128474,-0.15002,-0.140954,-0.125711,-0.117275,-0.143275,-0.138315,-0.143944,-0.12604,-0.130484,-0.121476,-0.0988208,-0.0947975,-0.0952625,-0.0948969,-0.10127,-0.104297,-0.13596,-0.144754,-0.155374,-0.155448,-0.17127,-0.162582,-0.167482,-0.161631,-0.185037,-0.174025,-0.165949,-0.154891,-0.140949,-0.111846,-0.0827093,-0.111275,-0.111614,-0.0816873,-0.0653275,-0.0793872,-0.0770651,-0.06905,-0.089088,-0.0841891,-0.0719633,-0.0629915,-0.0684015,-0.0441932,-0.0352217,0.00106344,0.0261079,0.0285072,0.0412925};
            return test;
        }

        private void Graph_Load(object sender, EventArgs e)
        {

        }

        private void zedGraphControl1_Load(object sender, EventArgs e)
        {

        }
    }
}
